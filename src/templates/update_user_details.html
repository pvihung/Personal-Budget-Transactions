{% extends 'base.html' %}
{% block title %}Update User Details â€” In My Pocket{% endblock %}

{% block content %}
    <h1>Update Details for {{ user.user_name if user else '' }}</h1>
    {% if error %}
        <div class="message error">{{ error }}</div>
    {% endif %}
    {% if success %}
        <div class="message success">{{ success }}</div>
    {% endif %}

    {# Precompute urls to avoid static-analyzer warnings in attributes #}
    {% set update_action = url_for('update_user', username=user.user_name) %}
    {% set cancel_url = url_for('user_page', username=user.user_name) %}

    <form method="POST" action="{{ update_action }}">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" value="{{ user.email or '' }}" placeholder="email" />

        <label for="household_size">Household size</label>
        <input id="household_size" name="household_size" type="number" min="0" value="{{ user.household_size if user.household_size is not none else '' }}" placeholder="household size" />

        <label for="city">City</label>
        <input id="city" name="city" type="text" value="{{ user.location_city or '' }}" placeholder="city" />

        <label for="state">State</label>
        <input id="state" name="state" type="text" value="{{ user.location_state or '' }}" placeholder="state" />

        <label for="zipcode">Postal / Zip code</label>
        <input id="zipcode" name="zipcode" type="text" value="{{ user.location_postal_code or '' }}" placeholder="postal code" />

        <label for="country">Country</label>
        <input id="country" name="country" type="text" value="{{ user.location_country or '' }}" placeholder="country" />

        <div class="actions">
            <button class="btn" type="submit">Save changes</button>
            <a class="btn secondary" href="{{ cancel_url }}">Cancel</a>
        </div>
    </form>
{% endblock %}
